---

title: Setup functions


keywords: fastai
sidebar: home_sidebar



nb_path: "nbs/00_setup.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/00_setup.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Setup-functions">Setup functions<a class="anchor-link" href="#Setup-functions"> </a></h1><blockquote><p>get_kaggle_dataset(competition)
pathFromCompetition(competition)
download_and_log(competition)
setup(competition)</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># !pip install -Uqq wandb</span>
<span class="c1"># !pip install -Uqq python-dotenv</span>
<span class="c1"># !pip install -Uqq pytest</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">load_dotenv</span><span class="p">()</span>
<span class="n">k</span> <span class="o">=</span> <span class="n">KaggleApi</span><span class="p">()</span>
<span class="n">k</span><span class="o">.</span><span class="n">authenticate</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Download-data-from-Kaggle">Download data from Kaggle<a class="anchor-link" href="#Download-data-from-Kaggle"> </a></h2><blockquote><p>Download any competition dataset and extract to expected fastai folder.  Uses fastai config to find out where to extract the dataset locally.</p>
</blockquote>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_kaggle_dataset" class="doc_header"><code>get_kaggle_dataset</code><a href="https://github.com/fredguth/nbdev_wandb_kaggle/tree/master/nfwk/data.py#L14" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_kaggle_dataset</code>(<strong><code>competition</code></strong>)</p>
</blockquote>
<p>Download and extract kaggle competition dataset to fastai data folder and return path to files.
get_kaggle_dataset(string) -&gt; Path
args:
    competition: string containing competition name in Kaggle
returns:
    path to local competition data</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">Exception</span><span class="p">)</span> <span class="k">as</span> <span class="n">e_info</span><span class="p">:</span>
    <span class="n">get_kaggle_dataset</span><span class="p">(</span><span class="s1">&#39;blah&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="s2">&quot;Exception&quot;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">e_info</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>$/home/fredguth/.fastai/archive/blah.zip does not exist.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">k</span><span class="o">.</span><span class="n">competitions_list</span><span class="p">(</span><span class="n">search</span><span class="o">=</span><span class="s1">&#39;dogs&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[dogs-vs-cats, dogs-vs-cats-redux-kernels-edition]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#p</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="pathFromCompetition" class="doc_header"><code>pathFromCompetition</code><a href="https://github.com/fredguth/nbdev_wandb_kaggle/tree/master/nfwk/data.py#L44" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>pathFromCompetition</code>(<strong><code>competition</code></strong>)</p>
</blockquote>
<p>Returns path to local competition files.
args:
competition: string containing name of competition</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">confirm</span><span class="p">(</span><span class="n">msg</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ask user to enter Y or N (case-insensitive).</span>
<span class="sd">    :return: True if the answer is Y.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">msg</span><span class="p">:</span> <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;OK to continue&quot;</span>
    <span class="k">while</span> <span class="n">answer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">]:</span>
        <span class="n">answer</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">msg</span><span class="o">+</span><span class="s2">&quot; [Y/N]? &quot;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">answer</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Download-data-from-Kaggle-and-log-at-WandB">Download data from Kaggle and log at WandB<a class="anchor-link" href="#Download-data-from-Kaggle-and-log-at-WandB"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="download_and_log" class="doc_header"><code>download_and_log</code><a href="https://github.com/fredguth/nbdev_wandb_kaggle/tree/master/nfwk/data.py#L54" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>download_and_log</code>(<strong><code>competition</code></strong>)</p>
</blockquote>
<p>Start a Run for data download at WandB, download competition data and log data reference in local machine as an Artifact at WandB.
args:
    competition: string containing competition name
returns:
    Path to competition data</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">download_and_log</span><span class="p">(</span><span class="s1">&#39;blah&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>No competition blah found at Kaggle.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="setup" class="doc_header"><code>setup</code><a href="https://github.com/fredguth/nbdev_wandb_kaggle/tree/master/nfwk/data.py#L90" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>setup</code>(<strong><code>competition</code></strong>)</p>
</blockquote>
<p>Returns Path to local competition files, download and log data if needed.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="s1">&#39;dogs&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>No competition dogs found.
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">setup</span><span class="p">(</span><span class="s1">&#39;dogs-vs-cats-redux-kernels-edition&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Path(&#39;/home/fredguth/.fastai/data/dogs-vs-cats-redux-kernels-edition&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

